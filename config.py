# config.py
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è Creative Performance Predictor.
–°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π —Å–∏—Å—Ç–µ–º—ã.
"""

import streamlit as st

# === –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===
APP_TITLE = "Creative Performance Predictor"
APP_VERSION = "1.0.0"
PAGE_ICON = "üé®"

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
SUPPORTED_IMAGE_FORMATS = ['jpg', 'jpeg', 'png', 'webp', 'bmp']
MAX_IMAGE_SIZE = 10 * 1024 * 1024  # 10MB

# === –ù–ê–°–¢–†–û–ô–ö–ò –ê–ù–ê–õ–ò–ó–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ===

# –¶–≤–µ—Ç–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑
COLOR_ANALYSIS = {
    'n_dominant_colors': 5,  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–º–∏–Ω–∏—Ä—É—é—â–∏—Ö —Ü–≤–µ—Ç–æ–≤
    'color_tolerance': 30,   # –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ü–≤–µ—Ç–æ–≤
    'harmony_threshold': 0.7 # –ü–æ—Ä–æ–≥ –¥–ª—è —Ü–≤–µ—Ç–æ–≤–æ–π –≥–∞—Ä–º–æ–Ω–∏–∏
}

# –ö–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
COMPOSITION_ANALYSIS = {
    'rule_of_thirds_tolerance': 0.1,  # –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–µ—Ç–µ–π
    'balance_threshold': 0.6,         # –ü–æ—Ä–æ–≥ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
    'complexity_levels': 5            # –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏
}

# –¢–µ–∫—Å—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
TEXT_ANALYSIS = {
    'min_text_confidence': 30,   # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å OCR
    'readability_threshold': 0.5, # –ü–æ—Ä–æ–≥ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
    'font_size_categories': ['small', 'medium', 'large', 'huge']
}

# === –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–®–ò–ù–ù–û–ì–û –û–ë–£–ß–ï–ù–ò–Ø ===

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–µ–π
ML_MODELS = {
    'random_forest': {
        'n_estimators': 100,
        'max_depth': 10,
        'random_state': 42
    },
    'xgboost': {
        'n_estimators': 100,
        'max_depth': 6,
        'learning_rate': 0.1,
        'random_state': 42
    },
    'linear': {
        'alpha': 1.0,
        'random_state': 42
    }
}

# –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
PERFORMANCE_METRICS = {
    'ctr': {'min': 0.001, 'max': 0.1, 'target': 0.02},
    'conversion_rate': {'min': 0.001, 'max': 0.5, 'target': 0.05},
    'engagement': {'min': 0.01, 'max': 1.0, 'target': 0.1}
}

# –í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
FEATURE_IMPORTANCE_THRESHOLD = 0.01

# === –ù–ê–°–¢–†–û–ô–ö–ò –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò ===

# –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
COLOR_SCHEME = {
    'primary': '#1f77b4',
    'secondary': '#ff7f0e', 
    'success': '#2ca02c',
    'warning': '#d62728',
    'info': '#17becf',
    'background': '#f8f9fa'
}

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤
PLOT_CONFIG = {
    'height': 400,
    'template': 'plotly_white',
    'show_toolbar': False,
    'responsive': True
}

# === –ù–ê–°–¢–†–û–ô–ö–ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô ===

# –¢–∏–ø—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
RECOMMENDATION_TYPES = {
    'color': '–¶–≤–µ—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è',
    'composition': '–ö–æ–º–ø–æ–∑–∏—Ü–∏—è',
    'text': '–¢–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã',
    'overall': '–û–±—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è'
}

# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
RECOMMENDATION_PRIORITIES = {
    'high': {'min_impact': 0.15, 'color': '#d62728'},
    'medium': {'min_impact': 0.08, 'color': '#ff7f0e'},
    'low': {'min_impact': 0.03, 'color': '#2ca02c'}
}

# === –°–ò–ù–¢–ï–¢–ò–ß–ï–°–ö–ò–ï –î–ê–ù–ù–´–ï ===

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏)
SYNTHETIC_DATA = {
    'n_samples': 300,      # –£–º–µ–Ω—å—à–µ–Ω–æ —Å 1000 –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
    'noise_level': 0.1,
    'random_state': 42
}

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–æ–≤
CREATIVE_CATEGORIES = [
    '–ê–≤—Ç–æ–º–æ–±–∏–ª–∏', '–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å', 'E-commerce', 
    '–§–∏–Ω–∞–Ω—Å—ã', '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ', '–ó–¥–æ—Ä–æ–≤—å–µ',
    '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'
]

# –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–≥–∏–æ–Ω—ã
REGIONS = ['–†–æ—Å—Å–∏—è', '–°–®–ê', '–ï–≤—Ä–æ–ø–∞', '–ê–∑–∏—è', '–î—Ä—É–≥–∏–µ']

# === –°–û–û–ë–©–ï–ù–ò–Ø –ò –¢–ï–ö–°–¢–´ ===

HELP_MESSAGES = {
    'image_upload': """
    –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä–µ–∞—Ç–∏–≤–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. 
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP.
    –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB.
    """,
    
    'model_prediction': """
    –ú–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∫—Ä–µ–∞—Ç–∏–≤–∞
    –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—É—á–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.
    """,
    
    'recommendations': """
    –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
    –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —É—Å–ø–µ—à–Ω—ã—Ö –∫—Ä–µ–∞—Ç–∏–≤–æ–≤.
    """
}

BUSINESS_EXPLANATIONS = {
    'ctr': """
    **Click-Through Rate (CTR)** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –∫ –ø–æ–∫–∞–∑–∞–º.
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∫—Ä–µ–∞—Ç–∏–≤ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.
    """,
    
    'conversion_rate': """
    **Conversion Rate** - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π –∫ –∫–ª–∏–∫–∞–º.
    –ò–∑–º–µ—Ä—è–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–∞ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫ –¥–µ–π—Å—Ç–≤–∏—é.
    """,
    
    'engagement': """
    **Engagement Rate** - —É—Ä–æ–≤–µ–Ω—å –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.
    –í–∫–ª—é—á–∞–µ—Ç –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ä–µ–ø–æ—Å—Ç—ã –∏ –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
    """
}

# === CSS –°–¢–ò–õ–ò ===

CUSTOM_CSS = """
<style>
    .metric-card {
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        padding: 1rem;
        border-radius: 10px;
        color: white;
        margin: 0.5rem 0;
    }
    
    .recommendation-high {
        border-left: 4px solid #d62728;
        padding-left: 1rem;
        background-color: #ffebee;
    }
    
    .recommendation-medium {
        border-left: 4px solid #ff7f0e;
        padding-left: 1rem;
        background-color: #fff3e0;
    }
    
    .recommendation-low {
        border-left: 4px solid #2ca02c;
        padding-left: 1rem;
        background-color: #e8f5e8;
    }
    
    .feature-importance-bar {
        background: linear-gradient(90deg, #1f77b4, #17becf);
        height: 20px;
        border-radius: 10px;
        margin: 0.2rem 0;
    }
    
    .stApp > header {
        background-color: transparent;
    }
    
    .main-header {
        font-size: 2.5rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 2rem;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
</style>
"""

# === –î–ï–ú–û –ö–û–ù–¢–ï–ù–¢ ===

DEMO_INSIGHTS = [
    "–¢–µ–ø–ª—ã–µ —Ü–≤–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ 23% –≤—ã—à–µ CTR –≤ —Å—Ñ–µ—Ä–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π",
    "–ö—Ä–µ–∞—Ç–∏–≤—ã —Å –ª–∏—Ü–∞–º–∏ –ª—é–¥–µ–π —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç engagement –Ω–∞ 31%", 
    "–ü—Ä–∞–≤–∏–ª–æ —Ç—Ä–µ—Ç–µ–π –ø–æ–≤—ã—à–∞–µ—Ç –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ 18%",
    "–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ —É–ª—É—á—à–∞—é—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –Ω–∞ 45%",
    "–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –¥–ª—è B2B —Å–µ–≥–º–µ–Ω—Ç–∞"
]

SAMPLE_RECOMMENDATIONS = {
    'color': [
        "–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —Ç–µ–ø–ª—ã—Ö –æ—Ç—Ç–µ–Ω–∫–æ–≤ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",
        "–ü–æ–≤—ã—Å—å—Ç–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ç–µ–∫—Å—Ç–æ–º –∏ —Ñ–æ–Ω–æ–º –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏",
        "–î–æ–±–∞–≤—å—Ç–µ –∞–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è –∫ CTA"
    ],
    'composition': [
        "–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –≤ —Ç–æ—á–∫—É –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –ª–∏–Ω–∏–π –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–µ—Ç–µ–π",
        "–£–º–µ–Ω—å—à–∏—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è",
        "–î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–æ–∫—Ä—É–≥ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤"
    ],
    'text': [
        "–£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –¥–ª—è –ª—É—á—à–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏",
        "–°–æ–∫—Ä–∞—Ç–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤",
        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤"
    ]
}

# === –§–£–ù–ö–¶–ò–ò –£–¢–ò–õ–ò–¢–´ ===

def get_color_name(rgb_color):
    """–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø–æ RGB –∑–Ω–∞—á–µ–Ω–∏—é."""
    color_names = {
        (255, 0, 0): '–ö—Ä–∞—Å–Ω—ã–π',
        (0, 255, 0): '–ó–µ–ª–µ–Ω—ã–π', 
        (0, 0, 255): '–°–∏–Ω–∏–π',
        (255, 255, 0): '–ñ–µ–ª—Ç—ã–π',
        (255, 0, 255): '–ü—É—Ä–ø—É—Ä–Ω—ã–π',
        (0, 255, 255): '–ì–æ–ª—É–±–æ–π',
        (255, 255, 255): '–ë–µ–ª—ã–π',
        (0, 0, 0): '–ß–µ—Ä–Ω—ã–π',
        (128, 128, 128): '–°–µ—Ä—ã–π'
    }
    
    # –ù–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à–∏–π —Ü–≤–µ—Ç
    min_distance = float('inf')
    closest_color = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π'
    
    for color_rgb, name in color_names.items():
        distance = sum((a - b) ** 2 for a, b in zip(rgb_color, color_rgb))
        if distance < min_distance:
            min_distance = distance
            closest_color = name
    
    return closest_color

def format_percentage(value, decimals=1):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç—ã."""
    return f"{value * 100:.{decimals}f}%"

def format_metric_change(old_value, new_value):
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏."""
    change = (new_value - old_value) / old_value
    direction = "‚Üó" if change > 0 else "‚Üò" if change < 0 else "‚Üí"
    return f"{direction} {format_percentage(abs(change))}"
